<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GeoJSON Editor - Interactive Web Component for Editing GeoJSON Data | @softwarity/geojson-editor</title>

  <!-- SEO Meta Tags -->
  <meta name="description" content="A powerful, lightweight Web Component for editing GeoJSON data with syntax highlighting, collapsible nodes, color picker, and MapLibre GL JS integration. Perfect for GIS applications and map editors.">
  <meta name="keywords" content="geojson, editor, web component, custom element, syntax highlighting, json editor, gis, mapping, maplibre, leaflet, openlayers, geospatial, coordinates, feature collection">
  <meta name="author" content="Softwarity">
  <meta name="robots" content="index, follow">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://softwarity.github.io/geojson-editor/">
  <meta property="og:title" content="GeoJSON Editor - Interactive Web Component">
  <meta property="og:description" content="A powerful Web Component for editing GeoJSON data with syntax highlighting, collapsible nodes, and color picker integration.">
  <meta property="og:image" content="https://softwarity.github.io/geojson-editor/og-image.png">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:url" content="https://softwarity.github.io/geojson-editor/">
  <meta name="twitter:title" content="GeoJSON Editor - Interactive Web Component">
  <meta name="twitter:description" content="A powerful Web Component for editing GeoJSON data with syntax highlighting, collapsible nodes, and color picker integration.">

  <!-- Canonical URL -->
  <link rel="canonical" href="https://softwarity.github.io/geojson-editor/">

  <!-- Structured Data (JSON-LD) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "SoftwareApplication",
    "name": "GeoJSON Editor",
    "applicationCategory": "DeveloperApplication",
    "operatingSystem": "Web Browser",
    "description": "A feature-rich GeoJSON editor Web Component with syntax highlighting, collapsible nodes, color picker, and map integration",
    "url": "https://softwarity.github.io/geojson-editor/",
    "author": {
      "@type": "Organization",
      "name": "Softwarity",
      "url": "https://www.softwarity.io/"
    },
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD"
    },
    "license": "https://opensource.org/licenses/MIT"
  }
  </script>

  <!-- MapLibre GL JS - Latest version with globe support -->
  <link href="https://unpkg.com/maplibre-gl@latest/dist/maplibre-gl.css" rel="stylesheet" />
  <script src="https://unpkg.com/maplibre-gl@latest/dist/maplibre-gl.js"></script>

  <!-- Material Symbols (only icons used, alphabetical order) -->
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=dark_mode,description,language,light_mode,menu_book,palette" rel="stylesheet">

  <!-- Demo styles -->
  <link rel="stylesheet" href="styles.css">

  <!-- Prism.js for syntax highlighting -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-markup.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-json.min.js"></script>
</head>
<body>
  <div class="container">
    <div class="header">
      <div style="display: flex; align-items: center; gap: 1rem;">
        <a href="https://www.softwarity.io/" target="_blank" rel="noopener noreferrer" title="Softwarity">
          <img src="https://www.softwarity.io/img/softwarity.svg" alt="Softwarity" style="height: 40px;">
        </a>
        <div>
          <h1 style="margin-bottom: 0.5rem;">@softwarity/geojson-editor</h1>
          <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
            <a href="https://www.npmjs.com/package/@softwarity/geojson-editor" target="_blank" rel="noopener">
              <img src="https://img.shields.io/npm/v/@softwarity/geojson-editor?color=blue&label=npm" alt="npm version">
            </a>
            <a href="https://bundlephobia.com/package/@softwarity/geojson-editor" target="_blank" rel="noopener">
              <img src="https://img.shields.io/bundlephobia/minzip/@softwarity/geojson-editor?label=size" alt="bundle size">
            </a>
            <a href="https://github.com/softwarity/geojson-editor/blob/main/LICENSE" target="_blank" rel="noopener">
              <img src="https://img.shields.io/badge/license-MIT-blue" alt="license">
            </a>
            <a href="https://codecov.io/gh/softwarity/geojson-editor" target="_blank" rel="noopener">
              <img src="https://codecov.io/gh/softwarity/geojson-editor/graph/badge.svg" alt="codecov">
            </a>
          </div>
        </div>
      </div>
      <div style="display: flex; gap: 1rem; align-items: center;">
        <a href="https://github.com/softwarity/geojson-editor#readme" target="_blank" rel="noopener noreferrer" class="github-link">
          <span class="material-symbols-outlined">menu_book</span>
          <span class="link-text">Documentation</span>
        </a>
        <a href="https://github.com/softwarity/geojson-editor/blob/main/RELEASE_NOTES.md" target="_blank" rel="noopener noreferrer" class="github-link">
          <span class="material-symbols-outlined">description</span>
          <span class="link-text">Release Notes</span>
        </a>
        <a href="https://github.com/softwarity/geojson-editor" target="_blank" rel="noopener noreferrer" class="github-link">
          <svg viewBox="0 0 16 16" width="20" height="20" aria-hidden="true">
            <path fill="currentColor" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path>
          </svg>
          <span class="link-text">GitHub</span>
        </a>
        <a href="https://www.softwarity.io/" target="_blank" rel="noopener noreferrer" class="github-link">
          <span class="material-symbols-outlined">language</span>
          <span class="link-text">Softwarity</span>
        </a>
      </div>
    </div>
    <div class="description">
      A lightweight Web Component for editing GeoJSON — with built-in validation, contextual type highlighting, auto-collapse coordinates, and feature visibility toggle (eye icon to hide/show features from events).
      <span style="color: var(--text-muted);">No Monaco (2.5 MB), no CodeMirror (150 KB), just what you need for GeoJSON.</span>
    </div>

    <div class="controls">
      <div class="controls-section">
        <h4>Theme</h4>
        <div class="controls-grid">
          <div class="control-group">
            <label for="themePresetMainSelect">Theme Preset</label>
            <div style="display: flex; gap: 0.5rem;">
              <select id="themePresetMainSelect" style="flex: 1;">
                <option value="" selected>Default (IntelliJ)</option>
                <option value="vscode">VS Code</option>
                <option value="github">GitHub</option>
                <option value="monokai">Monokai</option>
                <option value="solarized">Solarized</option>
              </select>
              <button class="btn-icon btn-accent" onclick="openThemeModal()" title="View theme CSS"><span class="material-symbols-outlined">palette</span></button>
              <button class="btn-icon" id="colorSchemeToggle" onclick="toggleColorScheme()" title="Toggle light/dark mode"><span class="material-symbols-outlined">light_mode</span></button>
            </div>
          </div>
        </div>
      </div>

      <div class="controls-section">
        <h4>Editor Options</h4>
        <div class="control-group" style="margin-bottom: 1rem;">
          <label for="placeholderInput">Placeholder Text (supports multi-line)</label>
          <textarea id="placeholderInput" rows="4">Enter GeoJSON features here...

Example:
{ "type": "Feature", "geometry": {...} }</textarea>
          <small style="color: #666; font-size: 0.85rem;">Shown when editor is empty</small>
        </div>
        <div class="info-box">
          <strong>Note:</strong> Edit features directly (comma-separated). The component wraps them in a FeatureCollection and emits the complete structure on change events.
        </div>
      </div>
    </div>

    <div class="editor-map-row">
      <div class="editor-container">
        <div class="editor-label">
          <span>GeoJSON Editor</span>
          <div class="editor-actions">
            <label class="editor-checkbox">
              <input type="checkbox" id="readonlyToggle" onchange="toggleReadonly()">
              <span>Readonly</span>
            </label>
            <label class="editor-checkbox" title="Enable Ctrl+I to add features via prompt">
              <input type="checkbox" id="internalAddToggle" onchange="toggleInternalAdd()">
              <span>Ctrl+I Add</span>
            </label>
            <button id="resetBtn" onclick="resetEditor()" title="Reset to original sample">↺</button>
          </div>
        </div>
        <geojson-editor id="editor"></geojson-editor>
      </div>
      <div class="map-container">
        <div class="map-label">MapLibre Preview</div>
        <div id="map"></div>
      </div>
    </div>

    <!-- API Toolbar -->
    <div class="api-toolbar">
      <h4>Features API</h4>
      <button class="api-btn" onclick="openApiModal('set')">set()</button>
      <button class="api-btn" onclick="openApiModal('add')">add()</button>
      <button class="api-btn" onclick="openApiModal('insertAt')">insertAt()</button>
      <button class="api-btn" onclick="openApiModal('removeAt')">removeAt()</button>
      <button class="api-btn danger" onclick="apiRemoveAll()">removeAll()</button>
      <button class="api-btn" onclick="apiEmit()">emit()</button>
    </div>

    <div class="section-box output">
      <h3>Events:</h3>
      <div class="events-grid">
        <div class="event-column">
          <h4>change</h4>
          <p>FeatureCollection (all visible features)</p>
          <div class="log-container">
            <pre id="eventLog" class="json-highlight">Waiting for change events...</pre>
            <button class="btn-clear" onclick="clearEventLog()" title="Clear">✕</button>
          </div>
        </div>
        <div class="event-column">
          <h4>current-feature</h4>
          <p>Feature at cursor (or null)</p>
          <div class="log-container">
            <pre id="currentFeatureLog" class="json-highlight">null</pre>
          </div>
        </div>
      </div>
    </div>

    <div class="section-box output error">
      <h3>Error Events:</h3>
      <p>
        When JSON is invalid, the component emits <code>error</code> events with:
        <strong>timestamp</strong>,
        <strong>error</strong> (error message),
        <strong>content</strong> (editor content for debugging)
      </p>
      <div class="log-container">
        <pre id="errorLog">No errors</pre>
        <button class="btn-clear" onclick="clearErrorLog()" title="Clear">✕</button>
      </div>
    </div>

    <div class="section-box code-example">
      <h3>HTML Code:</h3>
      <p>
        Copy this code to use the component in your own page (updates automatically with your settings)
      </p>
      <pre id="htmlCode"></pre>
    </div>

    <!-- Footer -->
    <footer class="footer">
      <a href="https://www.softwarity.io/" target="_blank" rel="noopener noreferrer">
        <img src="https://www.softwarity.io/img/softwarity.svg" alt="Softwarity logo">
        Made by Softwarity
      </a>
    </footer>
  </div>

  <!-- Theme CSS Viewer Modal -->
  <div id="themeModal" class="modal" style="display: none;">
    <div class="modal-backdrop" onclick="closeThemeModal()"></div>
    <div class="modal-content">
      <div class="modal-header">
        <h3 style="display: flex; align-items: center; gap: 0.5rem;"><span class="material-symbols-outlined large">palette</span> Theme CSS</h3>
        <button class="modal-close" onclick="closeThemeModal()">×</button>
      </div>
      <div class="modal-body">
        <p style="color: #666; font-size: 0.85rem; margin-bottom: 1rem;">
          Themes are CSS files using <code>light-dark()</code> for automatic dark/light switching.<br>
          Edit the CSS below and click "Apply" to preview, or "Copy" to use in your project.
        </p>
        <textarea id="themeTextarea" rows="20" spellcheck="false"></textarea>
        <div class="theme-actions">
          <button onclick="resetTheme()">Reset</button>
          <button onclick="copyTheme()">Copy CSS</button>
          <button class="btn-action" onclick="applyTheme()">Apply</button>
        </div>
      </div>
    </div>
  </div>

  <!-- API Modal -->
  <div id="apiModal" class="modal" style="display: none;">
    <div class="modal-backdrop" onclick="closeApiModal()"></div>
    <div class="modal-content" style="max-width: 600px;">
      <div class="modal-header">
        <h3 id="apiModalTitle">API Method</h3>
        <button class="modal-close" onclick="closeApiModal()">×</button>
      </div>
      <div class="modal-body api-modal-body">
        <!-- set() form -->
        <div id="apiFormSet" style="display: none;">
          <div class="form-group">
            <label for="apiSetFormat">Input Format</label>
            <select id="apiSetFormat" onchange="loadApiSample('set'); updateApiCallPreview('set')">
              <option value="feature-collection">FeatureCollection</option>
              <option value="features">Feature[]</option>
              <option value="feature">Feature</option>
            </select>
          </div>
          <div class="form-group">
            <label>Collapsed Attributes <span class="collapsed-default-hint" id="apiSetDefaultHint">(default: coordinates)</span></label>
            <div class="collapsed-checkboxes">
              <label><input type="checkbox" value="$root" onchange="updateApiCallPreview('set')"> $root</label>
              <label><input type="checkbox" value="coordinates" onchange="updateApiCallPreview('set')"> coordinates</label>
              <label><input type="checkbox" value="geometry" onchange="updateApiCallPreview('set')"> geometry</label>
              <label><input type="checkbox" value="properties" onchange="updateApiCallPreview('set')"> properties</label>
            </div>
          </div>
          <div class="form-group">
            <label>API Call</label>
            <div id="apiSetCallPreview" class="api-call-preview"><pre><code class="language-javascript"></code></pre></div>
          </div>
          <div class="form-group">
            <label>Data Preview (read-only)</label>
            <div id="apiSetPreview" class="api-code-preview json-highlight">
              <pre><code></code></pre>
            </div>
          </div>
        </div>

        <!-- add() form -->
        <div id="apiFormAdd" style="display: none;">
          <div class="form-group">
            <label for="apiAddFormat">Input Format</label>
            <select id="apiAddFormat" onchange="loadApiSample('add'); updateApiCallPreview('add')">
              <option value="feature-collection">FeatureCollection</option>
              <option value="features">Feature[]</option>
              <option value="feature">Feature</option>
            </select>
          </div>
          <div class="form-group">
            <label>Collapsed Attributes <span class="collapsed-default-hint" id="apiAddDefaultHint">(default: coordinates)</span></label>
            <div class="collapsed-checkboxes">
              <label><input type="checkbox" value="$root" onchange="updateApiCallPreview('add')"> $root</label>
              <label><input type="checkbox" value="coordinates" onchange="updateApiCallPreview('add')"> coordinates</label>
              <label><input type="checkbox" value="geometry" onchange="updateApiCallPreview('add')"> geometry</label>
              <label><input type="checkbox" value="properties" onchange="updateApiCallPreview('add')"> properties</label>
            </div>
          </div>
          <div class="form-group">
            <label>API Call</label>
            <div id="apiAddCallPreview" class="api-call-preview"><pre><code class="language-javascript"></code></pre></div>
          </div>
          <div class="form-group">
            <label>Data Preview (read-only)</label>
            <div id="apiAddPreview" class="api-code-preview json-highlight">
              <pre><code></code></pre>
            </div>
          </div>
        </div>

        <!-- insertAt() form -->
        <div id="apiFormInsertAt" style="display: none;">
          <div class="form-group">
            <label for="apiInsertAtFormat">Input Format</label>
            <select id="apiInsertAtFormat" onchange="loadApiSample('insertAt'); updateApiCallPreview('insertAt')">
              <option value="feature-collection">FeatureCollection</option>
              <option value="features">Feature[]</option>
              <option value="feature">Feature</option>
            </select>
          </div>
          <div class="form-group">
            <label for="apiInsertAtIndex">Index (negative = from end)</label>
            <input type="number" id="apiInsertAtIndex" value="0" oninput="updateApiCallPreview('insertAt')" />
          </div>
          <div class="form-group">
            <label>Collapsed Attributes <span class="collapsed-default-hint" id="apiInsertAtDefaultHint">(default: coordinates)</span></label>
            <div class="collapsed-checkboxes">
              <label><input type="checkbox" value="$root" onchange="updateApiCallPreview('insertAt')"> $root</label>
              <label><input type="checkbox" value="coordinates" onchange="updateApiCallPreview('insertAt')"> coordinates</label>
              <label><input type="checkbox" value="geometry" onchange="updateApiCallPreview('insertAt')"> geometry</label>
              <label><input type="checkbox" value="properties" onchange="updateApiCallPreview('insertAt')"> properties</label>
            </div>
          </div>
          <div class="form-group">
            <label>API Call</label>
            <div id="apiInsertAtCallPreview" class="api-call-preview"><pre><code class="language-javascript"></code></pre></div>
          </div>
          <div class="form-group">
            <label>Data Preview (read-only)</label>
            <div id="apiInsertAtPreview" class="api-code-preview json-highlight">
              <pre><code></code></pre>
            </div>
          </div>
        </div>

        <!-- removeAt() form -->
        <div id="apiFormRemoveAt" style="display: none;">
          <div class="form-group">
            <label for="apiRemoveAtIndex">Index (negative = from end, e.g. -1 = last)</label>
            <input type="number" id="apiRemoveAtIndex" value="0" />
          </div>
        </div>

        <div id="apiModalError" class="api-modal-error" style="display: none;"></div>

        <div class="api-modal-actions">
          <button onclick="closeApiModal()">Cancel</button>
          <button class="btn-action" onclick="executeApiMethod()">Execute</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Demo JavaScript -->
  <script type="module" src="main.js"></script>
  <!-- GeoJSON Editor component -->
  <script type="module" src="../src/geojson-editor.js"></script>
</body>
</html>
